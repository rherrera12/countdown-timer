<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Planet Fitness – Countdown Clock</title>
<style>
  :root{
    --pf-purple:#5F259F;
    --pf-yellow:#FFDE00;
    --ink:#111827;           /* dark text */
    --paper:#ffffff;         /* light panel */
    --muted:#6b7280;
    --ring:#e5e7eb;
    --shadow:0 20px 50px rgba(0,0,0,.25);
  }

  /* Page baseline (works standalone; remove if embedding into an existing page) */
  body{margin:0;min-height:100svh;display:grid;place-items:center;background:#fff;}

  /* Wrapper – portable block you can drop anywhere */
  .pf-counter{
    --surface: light; /* light | on-purple | on-yellow (affects contrast) */
    --radius: 22px;
    --size: min(86vw, 720px);   /* overall diameter of the clock */
    --panel: var(--paper);
    --text: var(--ink);

    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    color: var(--text);
    display:grid;
    gap:14px;
    justify-items:center;
    width:100%;
    padding:18px;
  }

  /* Surface variants for dropping on purple or yellow sections */
  .pf-counter.on-purple{ --panel:#23123a; --text:#ffffff; --ring:rgba(255,255,255,.14); --muted:#c7bfe0; }
  .pf-counter.on-yellow{ --panel:#fffaf0; --text:#111827; --ring:#e5e7eb; --muted:#6b7280; }

  .pf-head{
    text-align:center;
    display:grid;
    gap:6px;
  }
  .pf-head .headline{
    margin:0;
    font-weight:900;
    letter-spacing:.2px;
    font-size:clamp(22px,3.6vw,30px);
    line-height:1.08;
    color:var(--text);
  }
  .pf-head .sub{
    margin:0;
    color:var(--muted);
    font-weight:600;
    font-size:clamp(12px,2.4vw,14px);
  }

  /* Clock panel */
  .pf-panel{
    width:var(--size);
    aspect-ratio:1/1;
    border-radius:50%;
    background:
      radial-gradient(120% 120% at 100% 0%, rgba(255,255,255,.08), transparent 60%),
      var(--panel);
    border:1px solid var(--ring);
    box-shadow:var(--shadow);
    position:relative;
    display:grid;
    place-items:center;
  }

  /* Branded ring accents */
  .pf-panel::before{
    content:"";
    position:absolute; inset:10px;
    border-radius:50%;
    border:6px solid var(--pf-purple);
    opacity:.12;
    pointer-events:none;
  }
  .pf-panel::after{
    content:"";
    position:absolute; inset:calc(10px + 14px);
    border-radius:50%;
    border:3px dashed var(--pf-yellow);
    opacity:.38;
    pointer-events:none;
  }

  /* Center content (headline or summary) */
  .pf-center{
    position:absolute; inset:0;
    display:grid; place-items:center;
    padding:24px;
    text-align:center;
  }
  .pf-center .summary{
    display:inline-grid; gap:6px; justify-items:center;
    padding:14px 18px;
    border-radius:16px;
    background:rgba(255,255,255,.66);
    color:#111827;
    border:1px solid rgba(0,0,0,.08);
    backdrop-filter: blur(6px);
    box-shadow:0 6px 24px rgba(0,0,0,.12);
  }
  .pf-counter.on-purple .pf-center .summary{ background:rgba(35,18,58,.6); color:#fff; border-color:rgba(255,255,255,.12); }
  .pf-counter.on-yellow .pf-center .summary{ background:rgba(255,250,240,.75); color:#111827; }

  .pf-center .summary .kicker{
    font-size:12px; letter-spacing:.18em; text-transform:uppercase; color:var(--muted); font-weight:800;
  }
  .pf-center .summary .big{
    font-size:clamp(18px,2.8vw,22px); font-weight:800;
  }

  /* Unit chips (Days/Hours/Minutes/Seconds) */
  .pf-chip{
    --chipSize: clamp(120px, 22vw, 180px);
    position:absolute;
    width:var(--chipSize); height:var(--chipSize);
    border-radius:24px;
    background:#0f172a;
    border:1px solid var(--ring);
    display:grid; align-content:center; justify-items:center; gap:10px;
    box-shadow:inset 0 -12px 28px rgba(0,0,0,.25), 0 8px 30px rgba(0,0,0,.25);
    padding:14px;
  }
  /* Planet Fitness colors on the value area */
  .pf-chip .value{
    display:grid; grid-auto-flow:column; gap:8px; align-items:center; justify-content:center;
    background:var(--pf-purple);
    border:2px solid var(--pf-purple);
    color:var(--pf-yellow);
    border-radius:14px;
    padding:10px 14px;
    font-variant-numeric: tabular-nums lining-nums;
    font-feature-settings:"tnum" 1, "lnum" 1;
    font-weight:900;
    font-size:clamp(28px, 5.4vw, 42px);
    line-height:1;
    min-width: 88px;
  }
  .pf-chip .label{
    color:var(--muted);
    font-weight:800;
    font-size:12px;
    letter-spacing:.16em;
    text-transform:uppercase;
  }

  /* Place the 4 chips at cardinal positions */
  .pf-chip.days   { top: 6%;   left: 50%; transform:translate(-50%, 0); }
  .pf-chip.hours  { right: 6%;  top: 50%; transform:translate(0, -50%); }
  .pf-chip.mins   { bottom: 6%; left: 50%; transform:translate(-50%, 0); }
  .pf-chip.secs   { left: 6%;   top: 50%; transform:translate(0, -50%); }

  /* Prevent overflow when days hit 3 digits */
  .three-digit .value{ font-size:clamp(24px, 4.6vw, 36px); padding:8px 12px; }

  /* Mobile/tablet: linear layout with perfect centering */
  @media (max-width: 720px){
    .pf-panel{ width:min(94vw, 560px); aspect-ratio:auto; padding:18px 12px; border-radius:var(--radius); }
    .pf-panel::before,.pf-panel::after{ display:none; }
    .pf-center{ position:relative; inset:auto; order:0; }
    .pf-clockstack{
      display:grid; grid-template-columns: 1fr 1fr; gap:12px; width:100%; order:1;
      margin-top:8px;
    }
    .pf-chip{ position:relative; width:auto; height:auto; padding:16px 12px; border-radius:16px; }
    .pf-chip .value{ font-size:clamp(24px, 7.2vw, 36px); }
    .pf-chip.days, .pf-chip.hours, .pf-chip.mins, .pf-chip.secs{
      top:auto; right:auto; bottom:auto; left:auto; transform:none;
    }
  }
  @media (max-width: 420px){
    .pf-clockstack{ grid-template-columns:1fr; }
  }

  /* Subtle flip when numbers change */
  .flip{ animation:flip .45s ease; }
  @keyframes flip{ 0%{transform:rotateX(0)} 50%{transform:rotateX(14deg) scale(1.02)} 100%{transform:rotateX(0)} }
</style>
</head>
<body>

<!-- 
  Portable block
  data-surface: light | on-purple | on-yellow   (choose based on page background)
  data-days: integer → defaults to 20 if no data-end provided
  data-end: ISO 8601 with timezone (overrides data-days if present)
  data-headline / data-sub: copy
-->
<section
  id="pfCounter"
  class="pf-counter on-purple"     <!-- change to on-yellow, or remove for light -->
  data-days="20"
  data-headline="Offer Ends Soon!"
  data-sub="Enrollment ends tonight">
  
  <header class="pf-head">
    <h1 class="headline"></h1>
    <p class="sub"></p>
  </header>

  <div class="pf-panel">
    <!-- center summary -->
    <div class="pf-center">
      <div class="summary">
        <div class="kicker">Time Remaining</div>
        <div class="big" id="pfSummary">—</div>
      </div>
    </div>

    <!-- circular layout chips -->
    <div class="pf-chip days"  id="chipDays">
      <div class="value" id="valDays"><span>0</span><span>0</span></div>
      <div class="label">Days</div>
    </div>

    <div class="pf-chip hours" id="chipHours">
      <div class="value" id="valHours"><span>0</span><span>0</span></div>
      <div class="label">Hours</div>
    </div>

    <div class="pf-chip mins"  id="chipMins">
      <div class="value" id="valMins"><span>0</span><span>0</span></div>
      <div class="label">Minutes</div>
    </div>

    <div class="pf-chip secs"  id="chipSecs">
      <div class="value" id="valSecs"><span>0</span><span>0</span></div>
      <div class="label">Seconds</div>
    </div>

    <!-- responsive fallback stack (mobile) -->
    <div class="pf-clockstack" aria-hidden="true"></div>
  </div>
</section>

<script>
(function(){
  // Safe two-digit pad
  function l2(n){var s=String(Math.max(0,Math.floor(n)));return s.length<2?'0'+s:s;}

  // Write two digits into a .value element
  function setTwo(el, val){
    var s=l2(val), spans=el.querySelectorAll('span');
    if(!spans.length){ el.innerHTML='<span>0</span><span>0</span>'; spans=el.querySelectorAll('span'); }
    if(spans[0].textContent!==s.charAt(0)){spans[0].textContent=s.charAt(0); el.classList.add('flip');}
    if(spans[1].textContent!==s.charAt(1)){spans[1].textContent=s.charAt(1); el.classList.add('flip');}
    setTimeout(function(){ el.classList.remove('flip'); },260);
  }

  // Write days into a .value element, support 3 digits, shrink if needed
  function setDays(container, val){
    var need = val>99 ? 3 : 2;
    if(container.children.length!==need){
      container.innerHTML = need===3 ? '<span>0</span><span>0</span><span>0</span>' : '<span>0</span><span>0</span>';
      container.parentElement.classList.toggle('three-digit', need===3);
    }
    var s=String(val); while(s.length<need) s='0'+s;
    for(var i=0;i<need;i++){
      var sp=container.children[i];
      if(sp.textContent!==s.charAt(i)){ sp.textContent=s.charAt(i); container.classList.add('flip'); }
    }
    setTimeout(function(){ container.classList.remove('flip'); },260);
  }

  function fmtSummary(d,h,m){
    // “20d • 04h 12m” style summary
    var ds=d+'d';
    var hs=l2(h)+'h';
    var ms=l2(m)+'m';
    return ds + ' • ' + hs + ' ' + ms;
  }

  function initCounter(section){
    // Copy
    var headline = section.getAttribute('data-headline') || 'Offer Ends Soon!';
    var sub      = section.getAttribute('data-sub') || '';
    section.querySelector('.headline').textContent = headline;
    section.querySelector('.sub').textContent = sub;

    // Surface class (on-purple / on-yellow / light)
    if(section.classList.contains('on-purple')) { /* already set */ }
    else if(section.classList.contains('on-yellow')) { /* already set */ }
    else { section.classList.add('light'); }

    // End time: data-end wins; otherwise data-days from now (default 20)
    var endAttr = section.getAttribute('data-end');
    var daysAttr = parseInt(section.getAttribute('data-days') || '20', 10);
    var endMs;
    if(endAttr){
      endMs = Date.parse(endAttr);
      if(isNaN(endMs)){ var tmp=new Date(endAttr); if(!isNaN(tmp)) endMs=tmp.getTime(); }
    } else {
      endMs = Date.now() + Math.max(1, daysAttr)*86400000;
    }

    // Elements
    var elDays = document.getElementById('valDays');
    var elHours= document.getElementById('valHours');
    var elMins = document.getElementById('valMins');
    var elSecs = document.getElementById('valSecs');
    var elSummary = document.getElementById('pfSummary');

    function tick(){
      var now = Date.now();
      var diff = endMs - now;

      if(diff<=0){
        setDays(elDays,0); setTwo(elHours,0); setTwo(elMins,0); setTwo(elSecs,0);
        elSummary.textContent = 'Offer ended';
        return;
      }

      var d = Math.floor(diff/86400000); diff -= d*86400000;
      var h = Math.floor(diff/3600000);  diff -= h*3600000;
      var m = Math.floor(diff/60000);    diff -= m*60000;
      var s = Math.floor(diff/1000);

      setDays(elDays, d);
      setTwo(elHours, h);
      setTwo(elMins,  m);
      setTwo(elSecs,  s);

      elSummary.textContent = fmtSummary(d,h,m);
    }

    tick();
    var iv = setInterval(function(){ tick(); if(Date.now()>=endMs) clearInterval(iv); }, 1000);
  }

  document.addEventListener('DOMContentLoaded', function(){
    var sec = document.getElementById('pfCounter');
    initCounter(sec);
  });
})();
</script>
</body>
</html>
